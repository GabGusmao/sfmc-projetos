<script>
const telefoneInput = document.getElementById("telefone");

telefoneInput.addEventListener("input", function () {
  // Remove tudo que não for número
  let valor = telefoneInput.value.replace(/\D/g, "");

  // Sempre mantém começando com 55
  if (!valor.startsWith("55")) {
    valor = "55" + valor.replace(/^55/, "");
  }

  // Limita a 13 dígitos (55 + DDD + 9 dígitos)
  if (valor.length > 13) {
    valor = valor.substring(0, 13);
  }

  telefoneInput.value = valor;
});


document.getElementById("conversion-form").addEventListener("submit", function(e){

  const nome = document.getElementById("nome").value.trim();
  const email = document.getElementById("email").value.trim();
  const telefone = telefoneInput.value;

  // Valida nome
  if(nome.length < 3){
    alert("Digite seu nome completo.");
    e.preventDefault();
    return;
  }

  // Valida email
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailRegex.test(email)){
    alert("Digite um e-mail válido.");
    e.preventDefault();
    return;
  }

  // Valida telefone (13 dígitos, celular começa com 9)
  if(telefone.length !== 13 || telefone.substring(4,5) !== "9"){
    alert("Digite um celular válido com DDD. Ex: 5531999998888");
    e.preventDefault();
    return;
  }

  // Envia telefone normalizado
  document.getElementById("telefone_real").value = telefone;
});
</script>
